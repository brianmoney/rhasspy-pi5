
services:
  mosquitto:
    image: eclipse-mosquitto:2
    container_name: mosquitto
    restart: unless-stopped
    ports:
      - "1883:1883"

  rhasspy:
    image: rhasspy/rhasspy
    container_name: rhasspy
    restart: unless-stopped
    network_mode: host  # Required for audio input/output and local MQTT
    devices:
      - "/dev/snd:/dev/snd"
    environment:
      - PULSE_SERVER=unix:/run/user/1000/pulse/native
    volumes:
      - /run/user/1000/pulse:/run/user/1000/pulse
      - ~/.config/pulse/cookie:/home/rhasspy/.config/pulse/cookie
      - ./profiles:/profiles
    user: "1000:1000"
    tty: true
    command: >
      --user-profiles /profiles
      --profile en



